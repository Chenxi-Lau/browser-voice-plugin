!function(e,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.SpeechJs=s():e.SpeechJs=s()}(self,(function(){return(()=>{"use strict";var e={d:(s,t)=>{for(var o in t)e.o(t,o)&&!e.o(s,o)&&Object.defineProperty(s,o,{enumerable:!0,get:t[o]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)},s={};e.d(s,{default:()=>u});const t={ASYNC_SPEAK:1,SYNC_SPEAK:2,PURGE_BEFORE_SPEAK:3},o={LOW:"low",MIDDLE:"middle ",HIGHT:"hight"},n={SLOW:"slow",NORMAL:"normal ",FAST:"fast"};class r{#sounder=null;constructor(e){this.options=e}init(){const e=this.options;this.#sounder=new ActiveXObject("Sapi.SpVoice"),this.#sounder.volume=e.volume===o.LOW?20:e.volume==o.HIGHT?100:50,this.#sounder.rate=this.options.rate===n.SLOW?-5:e.rate==n.FAST?5:0}speak(e){const s=this.options,o=s.flags===t.ASYNC_SPEAK?1:s.flags===t.SYNC_SPEAK?2:3;this.#sounder.Speak(e,o)}pause(){this.#sounder.Pause()}resume(){this.#sounder.Resume()}stop(){this.#sounder.Speak("",t.PURGE_BEFORE_SPEAK)}}class i{#sounder=null;constructor(e){this.options=e}init(){const e=this.options;this.#sounder=new SpeechSynthesisUtterance,this.#sounder.volume=e.volume==o.LOW?.2:e.volume==o.HIGHT?1:.5,this.#sounder.rate=e.rate==n.SLOW?.1:e.rate==n.FAST?5:1}speak(e){this.#sounder.text=e,window.speechSynthesis.speak(this.#sounder)}pause(){window.speechSynthesis.pause()}resume(){window.speechSynthesis.resume()}stop(){window.speechSynthesis.cancel()}}const u=class{#sounder=null;#myBrowser=()=>{const e=navigator.userAgent,s=e.indexOf("Opera")>-1,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&!s,o=e.indexOf("Safari")>-1&&-1==e.indexOf("Chrome"),n=e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1;return t?"IE":!(!o&&!n)&&"other"};#init=()=>{if(window._$sounder)throw new Error("当前页面只能初始化一个Sounder对象");if("object"!=typeof this.options||Array.isArray(this.options))throw new Error("不是有效的参数对象");const e={volume:o.HIGHT,rate:n.NORMAL,flags:t.PURGE_BEFORE_SPEAK},s=Object.assign(e,this.options),u=this.#myBrowser();if("IE"===u)this.#sounder=new r(s);else{if("other"!=u)throw new Error("Sorry！该浏览器暂不支持语音播报");this.#sounder=new i(s)}this.#sounder.init(),window._$sounder=this.#sounder};constructor(e){this.options=e,this.#init(e)}speak(e){"string"==typeof e&&this.#sounder.speak(e)}pause(){this.#sounder.pause()}resume(){this.#sounder.resume()}stop(){this.#sounder.stop()}};return s=s.default})()}));